# Check_config
Набор скриптов для работы с сетевым оборудованием:
Зависимости:
- Netmiko
- jinja2
- yaml
- textfsm (требуется Linux)

Об использование:
запуск скриптов через:
python3 name.py


1. Подготовка файла hosts.yaml в котором в формате ключ-значение указывается предполагаемый хост подключения и его порт.
по умолчанию данные в файле указаны.

2. Для генерации конфигураций необходимо воспользоваться "generate_conf.py" ---> он обращается в директорию: Jinja2_templates и подставляет данные из vars.yaml (по умолчанию данные заполнены для ЛР OSPF+RIP+ISIS). Данный скрипт генерирует в корневой директории 7 файлов конфигурации.

3. Для взаимодействия с сетевым оборудованием:
  1) проверка файла hosts.yaml на соответствие портов 
  2) при запуске cкрипт предложит: отправка конфигурационного файла ИЛИ отправка команды
     указывается опция выбора, для команды вводится команда CLI FRR
  3) далее потребуется ввести имя пользователя, пароль
  4) после этого он начнет последовательно подключаться к устройствам заданным в hosts.yaml
     если это отправка конфигурационного файла, то при подключение к каждому из устройств потребуется указать путь до конфигурационного      файла, помещать его следует в корневую папку проекта, если файл (R1.txt) то так и указать.

  5) при выполнение отправки конфигураций также по умолчанию выполняется команда "show running config", чтобы пользователь мог видеть     действительную загрузку конфигурации.
  
 4.  Для тестирования работоспособности заданной топологии:
 cкрипт: test_conf.py 
 номера портов: использует файл  hosts.yaml
 ip-адрес: вбит по умолчанию 127.0.0.1
 
 Алгоритм:
 
Пользователю предлагается осуществить проверку одного из протоколов маршрутизации (OSPF, RIP, IS-IS):
       
       
       - проверка соседей OSPF     - show ip ospf neighbor
       - проверка работы RIP       - show ip rip status 
       - проверка соседей IS-IS    - show isis neighbor
       - проверка маршрутов IS-IS  - show isis topology
       - запрос различных таблиц маршрутизации - show ip route [OSPF, RIP, Connected]
       
После того как пользователь вводит желаемую проверку (в виде команды), ему предлагается указать: логин, пароль, устройство на котором будет проверка (r1,r2,r3,r4,r5,r6,r7) ГДЕ: порты согласуются с hosts.yaml


О ПРОВЕРКАХ:
1) при вводе команды: show ip ospf neighbor, подразумевается что для хоста R1 соседи это (2.2.2.2 и 3.3.3.3), для R2 (1.1.1.1 и 3.3.3.3) для R3 по аналогии.

От пользователя необходима лишь команда, после чего она согласуется с файлом index в директории TextFSM_templates и обрабатывается соответствующим шаблоном.

Если условия соблюдены, то сообщается что  проверка прошла для заданного хоста, нет сообщаются либо соседи или отсутствие инфы


2) проверка работы RIP       - show ip rip status

команда обрабатывается и выводится таблица TextFSM по которой пользователь может судить о доступных маршрутах для узла, решение не приводится потому что зависит от выбранных подсетей.


3) проверка соседей IS-IS    - show isis neighbor аналогично п.2)

4) проверка маршрутов IS-IS  - show isis topology

предполагается что соединение IS-IS должно быть установлено между R1 и R4, 
- если есть сосед 4.4.4.4 и он у R1:  то подтверждается корректность
- если есть сосед 1.1.1.1 и он у R4:  то подтверждается корректность

иначе сообщается что настройки заданы некорректно, предлагается таблица.



5) обработка с помощью show ip route ---> вывод таблиц для проверок



В целом продемонстрирован подход работы с TextFSM - вывод через таблицы, парсинг определенных значений, синхронизация команд от пользователя и шаблонов обработки. Если введена команда для которой нет шаблона, будет представлен вывод по ней.


5. Для тестирования ping:
cкрипт: test_ping.py

Пользователю предлагается указать источник и получателя - ICMP запросов (согласуется с файлом hosts.yaml):
после этого отправляется команда из 4 пакетов: 
             r1':'ping 1.1.1.1 -c 4',
            'r2':'ping 2.2.2.2 -c 4',
            'r3':'ping 3.3.3.3 -c 4',
            'r4':'ping 4.4.4.4 -c 4',
            'r5':'ping 5.5.5.5 -c 4',
            'r6':'ping 6.6.6.6 -c 4',
            'r7':'ping 7.7.7.7 -c 4'



Внимание: ввиду ограничений тестируемой среды FRR, выполнение данного скрипта нужно делать от имени пользователя Bash-оболочки.

После выполнения команды, делается решение о доступности узла по адресу. 



       
 
 
 
 
  




